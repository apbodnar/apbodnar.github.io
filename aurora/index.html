
<html>

<head>
<title>Aurora</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

<script type="text/javascript" src="gl-matrix.js"></script>
<script type="text/javascript" src="webgl-utils.js"></script>

<script id="shader-fs" type="x-shader/x-fragment">
  precision highp float;
  
  uniform float tick; 
  uniform sampler2D uSampler; 
  uniform float osz;
  
  varying float noise;

  varying vec4 coord;
  void main(void) {
    float x = coord.x;
    float y = coord.y;
    float z = coord.z;
      
    float xr_intensity = 0.3 + 0.6*sin(x/3.3457+tick/1848.0);
    float xg_intensity = 1.0 - 0.6*sin(x/3.3457+tick/1848.0);//sin(10.0*coord.x);
    float xb_intensity = 0.3 + 0.8*sin(x/68.52+tick/5000.0);
    
    float perturb = (sin(x/10.0 - tick/2000.0) * cos(29.8658176*x+tick/200.0))/3.0 + 1.0;
    float y_intensity = 1.0;//((pow(1.0-y,2.0) - pow(1.0-y,3.0)) / 0.15) * perturb;

    float redband = y_intensity * xr_intensity;
    float greenband = y_intensity * xg_intensity;
    float blueband = y_intensity * xb_intensity;

    float alpha = 0.1;
    gl_FragColor = normalize(vec4(redband,greenband,blueband,alpha));
  }
</script>

<script id="shader-vs" type="x-shader/x-vertex">
  precision highp float;
  attribute vec3 aVertexPosition;
  uniform float tick;
  uniform mat4 PM;
  uniform mat4 R;

  uniform float crunch;
  uniform float num_quads;

  uniform float osy;
  uniform float osz;

  varying vec4 coord;
  varying float noise;

  void main(void) {
    coord = vec4(aVertexPosition,1.0) + vec4(0.0,0.5 + osy,0.0,0.0);
    float x = aVertexPosition.x;
    float y = aVertexPosition.y+0.5*sin(aVertexPosition.x+tick/2000.0)+0.1*sin(aVertexPosition.x*5.0+tick/1032.0);
    float z = aVertexPosition.z+0.2*sin(aVertexPosition.x*3.87-tick/500.0);
    gl_Position = PM*R*vec4(x,y,z,1.0);
  }
</script>

<script src="aurora.js" type="text/javascript"></script>
</head>


<body onload="webGLStart();">
    <canvas id="aurora_canvas" style="border: solid; color: black; border-width: 1px;" width="800" height="800"></canvas>
</body>

</html>
